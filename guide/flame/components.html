<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Components</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-BN648wXD.css" as="style"><link rel="stylesheet" href="/assets/style-BN648wXD.css">
    <link rel="modulepreload" href="/assets/app-B8TszOv9.js"><link rel="modulepreload" href="/assets/components.html-C1zhZrl3.js"><link rel="modulepreload" href="/assets/isometric-C4noXiBa.js">
    <link rel="prefetch" href="/assets/index.html-arzyZ3nx.js" as="script"><link rel="prefetch" href="/assets/index.html-BBP4r19K.js" as="script"><link rel="prefetch" href="/assets/index.html-BBP4r19K.js" as="script"><link rel="prefetch" href="/assets/camera_component.chatgpt.html-DvEcJ_R-.js" as="script"><link rel="prefetch" href="/assets/camera_component.html-BGq0fxdF.js" as="script"><link rel="prefetch" href="/assets/camera_component.qwen.html-FJcBALns.js" as="script"><link rel="prefetch" href="/assets/collision_detection.html-Cbw-yUM9.js" as="script"><link rel="prefetch" href="/assets/collision_detection.qwen.html-CtxH7s8z.js" as="script"><link rel="prefetch" href="/assets/components.qwen.html-BiJ0BJ0G.js" as="script"><link rel="prefetch" href="/assets/effects.html-VV8MUg7h.js" as="script"><link rel="prefetch" href="/assets/effects.qwen.html-DsA-4pUZ.js" as="script"><link rel="prefetch" href="/assets/game.chatgpt.html-wqVLDES4.js" as="script"><link rel="prefetch" href="/assets/game.html-CAIdT-ZG.js" as="script"><link rel="prefetch" href="/assets/game_widget.chatgpt.html-B9M6ZuSj.js" as="script"><link rel="prefetch" href="/assets/game_widget.html-BKEu2_1-.js" as="script"><link rel="prefetch" href="/assets/overlays.chatgpt.html-Nw5VrR3v.js" as="script"><link rel="prefetch" href="/assets/overlays.html-D-mkVbtf.js" as="script"><link rel="prefetch" href="/assets/platforms.chatgpt.html-G-AEyOkZ.js" as="script"><link rel="prefetch" href="/assets/platforms.html-BDogOiXU.js" as="script"><link rel="prefetch" href="/assets/router.chatgpt.html-B6IGFlgz.js" as="script"><link rel="prefetch" href="/assets/router.html-BBO-JMDL.js" as="script"><link rel="prefetch" href="/assets/structure.chatgpt.html-DRK55Qj2.js" as="script"><link rel="prefetch" href="/assets/structure.html-CZvhgO9r.js" as="script"><link rel="prefetch" href="/assets/structure.qwen.html-D7NUJ7ig.js" as="script"><link rel="prefetch" href="/assets/align_component.chatgpt.html-DR2ghDAD.js" as="script"><link rel="prefetch" href="/assets/align_component.html-W8ibR_D6.js" as="script"><link rel="prefetch" href="/assets/debug.chatgpt.html-CMWM3ry8.js" as="script"><link rel="prefetch" href="/assets/debug.html-Ct3A36sB.js" as="script"><link rel="prefetch" href="/assets/performance.chatgpt.html-vC2svxVx.js" as="script"><link rel="prefetch" href="/assets/performance.html-C8S0Wxmw.js" as="script"><link rel="prefetch" href="/assets/util.chatgpt.html-B7Zl4jU8.js" as="script"><link rel="prefetch" href="/assets/util.html-NP2UKvaX.js" as="script"><link rel="prefetch" href="/assets/widgets.chatgpt.html-B80jZpVG.js" as="script"><link rel="prefetch" href="/assets/widgets.html-BFsLnrBI.js" as="script"><link rel="prefetch" href="/assets/drag_events.chatgpt.html-DFfjOyUl.js" as="script"><link rel="prefetch" href="/assets/drag_events.html-BtZOQI0f.js" as="script"><link rel="prefetch" href="/assets/gesture_input.chatgpt.html-Dp5SsVbf.js" as="script"><link rel="prefetch" href="/assets/gesture_input.html-CxblHVNe.js" as="script"><link rel="prefetch" href="/assets/hardware_keyboard_detector.chatgpt.html-CLQ_0y1l.js" as="script"><link rel="prefetch" href="/assets/hardware_keyboard_detector.html-BmLKvFEJ.js" as="script"><link rel="prefetch" href="/assets/keyboard_input.chatgpt.html-BcRtS1pD.js" as="script"><link rel="prefetch" href="/assets/keyboard_input.html-C_0h1Sp5.js" as="script"><link rel="prefetch" href="/assets/keyboard_input.qwen.html-DqwDo_w7.js" as="script"><link rel="prefetch" href="/assets/other_inputs.chatgpt.html-B9NR94Tn.js" as="script"><link rel="prefetch" href="/assets/other_inputs.html-DYUJoz2X.js" as="script"><link rel="prefetch" href="/assets/other_inputs.qwen.html-C8FCB0gl.js" as="script"><link rel="prefetch" href="/assets/pointer_events.chatgpt.html-97gc-4S6.js" as="script"><link rel="prefetch" href="/assets/pointer_events.html-BMUS2Dy2.js" as="script"><link rel="prefetch" href="/assets/tap_events.chatgpt.html-DCc26h6w.js" as="script"><link rel="prefetch" href="/assets/tap_events.html-U6QBZqoN.js" as="script"><link rel="prefetch" href="/assets/decorators.chatgpt.html-CsNo6Jfm.js" as="script"><link rel="prefetch" href="/assets/decorators.html-zVhtVzeG.js" as="script"><link rel="prefetch" href="/assets/images.chatgpt.html-BRhJsW1L.js" as="script"><link rel="prefetch" href="/assets/images.html-N7pMFzNp.js" as="script"><link rel="prefetch" href="/assets/images.qwen.html-Bu1Ba2i_.js" as="script"><link rel="prefetch" href="/assets/layers.chatgpt.html-g_4IlMCj.js" as="script"><link rel="prefetch" href="/assets/layers.html-D39C0Yh_.js" as="script"><link rel="prefetch" href="/assets/layers.qwen.html-Cap9ALNs.js" as="script"><link rel="prefetch" href="/assets/palette.chatgpt.html-D-pwtky0.js" as="script"><link rel="prefetch" href="/assets/palette.html-C9GXK8pX.js" as="script"><link rel="prefetch" href="/assets/particles.chatgpt.html-CRM61T3Z.js" as="script"><link rel="prefetch" href="/assets/particles.html-DORo3lVm.js" as="script"><link rel="prefetch" href="/assets/text_rendering.html-Cuwa5R4e.js" as="script"><link rel="prefetch" href="/assets/text_rendering.qwen.html-DnMNOnfw.js" as="script"><link rel="prefetch" href="/assets/404.html-DEivmG0Z.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-BpHim7uC.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="/images/logo.png" alt><!----></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://docs.flame-engine.org/1.22.0/" aria-label="AI 融合游戏引擎丨加微信：DigitalSpriteJack" rel="noopener noreferrer" target="_blank"><!---->AI 融合游戏引擎丨加微信：DigitalSpriteJack<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://docs.flame-engine.org/1.22.0/" aria-label="flame版本 1.22.0" rel="noopener noreferrer" target="_blank"><!---->flame版本 1.22.0<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://flame-engine.org/" aria-label="官网" rel="noopener noreferrer" target="_blank"><!---->官网<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://examples.flame-engine.org/" aria-label="示例" rel="noopener noreferrer" target="_blank"><!---->示例<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/flame-engine/flame" aria-label="Github" rel="noopener noreferrer" target="_blank"><!---->Github<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://docs.flame-engine.org/1.22.0/" aria-label="AI 融合游戏引擎丨加微信：DigitalSpriteJack" rel="noopener noreferrer" target="_blank"><!---->AI 融合游戏引擎丨加微信：DigitalSpriteJack<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://docs.flame-engine.org/1.22.0/" aria-label="flame版本 1.22.0" rel="noopener noreferrer" target="_blank"><!---->flame版本 1.22.0<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://flame-engine.org/" aria-label="官网" rel="noopener noreferrer" target="_blank"><!---->官网<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://examples.flame-engine.org/" aria-label="示例" rel="noopener noreferrer" target="_blank"><!---->示例<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/flame-engine/flame" aria-label="Github" rel="noopener noreferrer" target="_blank"><!---->Github<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/" aria-label="入门指南"><!---->入门指南<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading active collapsible" href="/guide/flame/structure.chatgpt.html" aria-label="▼ Flame（文件结构..）"><!---->▼ Flame（文件结构..）<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/structure.chatgpt.html" aria-label="|-文件结构"><!---->|-文件结构<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/structure.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/structure.qwen.html" aria-label="千问版"><!---->千问版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/structure.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/game_widget.chatgpt.html" aria-label="|-游戏小部件"><!---->|-游戏小部件<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/game_widget.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/game_widget.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/game.chatgpt.html" aria-label="|-游戏循环"><!---->|-游戏循环<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/game.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/game.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item active collapsible" href="/guide/flame/components.qwen.html" aria-label="|-组件"><!---->|-组件<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/components.qwen.html" aria-label="千问版"><!---->千问版<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/guide/flame/components.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/router.chatgpt.html" aria-label="|-路由"><!---->|-路由<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/router.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/router.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/platforms.chatgpt.html" aria-label="|-平台"><!---->|-平台<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/platforms.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/platforms.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/collision_detection.qwen.html" aria-label="|-碰撞检测"><!---->|-碰撞检测<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/collision_detection.qwen.html" aria-label="千问版"><!---->千问版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/collision_detection.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/effects.qwen.html" aria-label="|-效果器"><!---->|-效果器<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/effects.qwen.html" aria-label="千问版"><!---->千问版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/effects.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/camera_component.qwen.html" aria-label="|-相机组件"><!---->|-相机组件<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/camera_component.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/camera_component.qwen.html" aria-label="千问版"><!---->千问版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/camera_component.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/inputs/keyboard_input.chatgpt.html" aria-label="| ▼ 输入(..键盘输入..)"><!---->| ▼ 输入(..键盘输入..)<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/inputs/drag_events.chatgpt.html" aria-label="|-拖拽事件"><!---->|-拖拽事件<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/drag_events.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/drag_events.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/inputs/gesture_input.chatgpt.html" aria-label="|-手势输入"><!---->|-手势输入<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/gesture_input.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/gesture_input.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/inputs/keyboard_input.chatgpt.html" aria-label="|-键盘输入"><!---->|-键盘输入<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/keyboard_input.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/keyboard_input.qwen.html" aria-label="千问版"><!---->千问版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/keyboard_input.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/inputs/other_inputs.chatgpt.html" aria-label="|-其他输入"><!---->|-其他输入<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/other_inputs.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/other_inputs.qwen.html" aria-label="千问版"><!---->千问版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/other_inputs.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/inputs/tap_events.chatgpt.html" aria-label="|-点击事件"><!---->|-点击事件<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/tap_events.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/tap_events.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/inputs/pointer_events.chatgpt.html" aria-label="|-指针事件"><!---->|-指针事件<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/pointer_events.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/pointer_events.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/inputs/hardware_keyboard_detector.chatgpt.html" aria-label="|-硬件键盘探测器"><!---->|-硬件键盘探测器<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/hardware_keyboard_detector.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/inputs/hardware_keyboard_detector.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/rendering/palette.chatgpt.html" aria-label="| ▼ 渲染(颜色..)"><!---->| ▼ 渲染(颜色..)<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/rendering/palette.chatgpt.html" aria-label="|-颜色"><!---->|-颜色<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/rendering/palette.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/rendering/palette.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/rendering/decorators.chatgpt.html" aria-label="|-装饰器"><!---->|-装饰器<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/rendering/decorators.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/rendering/decorators.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/rendering/images.chatgpt.html" aria-label="|-图像精灵和动画"><!---->|-图像精灵和动画<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/rendering/images.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/rendering/images.qwen.html" aria-label="千问版"><!---->千问版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/rendering/images.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/rendering/layers.chatgpt.html" aria-label="|-图层和快照"><!---->|-图层和快照<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/rendering/layers.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/rendering/layers.qwen.html" aria-label="千问版"><!---->千问版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/rendering/layers.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/rendering/particles.chatgpt.html" aria-label="|-粒子"><!---->|-粒子<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/rendering/particles.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/rendering/particles.qwen.html" aria-label="千问版"><!---->千问版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/rendering/particles.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/rendering/text_rendering.qwen.html" aria-label="|-文本渲染"><!---->|-文本渲染<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/rendering/text_rendering.qwen.html" aria-label="千问版"><!---->千问版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/rendering/text_rendering.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/layout/align_component.chatgpt.html" aria-label="| ▼ 布局(对齐组件)"><!---->| ▼ 布局(对齐组件)<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/layout/align_component.chatgpt.html" aria-label="|-对齐组件"><!---->|-对齐组件<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/layout/align_component.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/layout/align_component.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/overlays.chatgpt.html" aria-label="|-悬浮层"><!---->|-悬浮层<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/overlays.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/overlays.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/other/debug.chatgpt.html" aria-label="| ▼ 其他(调试..)"><!---->| ▼ 其他(调试..)<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/other/debug.chatgpt.html" aria-label="|-调试"><!---->|-调试<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/other/debug.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/other/debug.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/other/util.chatgpt.html" aria-label="|-工具"><!---->|-工具<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/other/util.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/other/util.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/other/widgets.chatgpt.html" aria-label="|-小部件"><!---->|-小部件<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/other/widgets.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/other/widgets.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/guide/flame/other/performance.chatgpt.html" aria-label="|-性能优化"><!---->|-性能优化<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/other/performance.chatgpt.html" aria-label="GPT版"><!---->GPT版<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/guide/flame/other/performance.html" aria-label="英文原版"><!---->英文原版<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="components" tabindex="-1"><a class="header-anchor" href="#components"><span>Components</span></a></h1><p><img src="/images/component_tree.png" alt=""></p><p>This diagram might look intimidating, but don&#39;t worry, it is not as complex as it looks.</p><h2 id="component" tabindex="-1"><a class="header-anchor" href="#component"><span>Component</span></a></h2><p>All components inherit from the <code>Component</code> class and can have other <code>Component</code>s as children. This is the base of what we call the Flame Component System, or FCS for short.</p><p>Children can be added either with the <code>add(Component c)</code> method or directly in the constructor.</p><p>Example:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">final</span> component1 <span class="token operator">=</span> <span class="token class-name">Component</span><span class="token punctuation">(</span>children<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">final</span> component2 <span class="token operator">=</span> <span class="token class-name">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  component2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  component2<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>Component()</code> here could of course be any subclass of <code>Component</code>.</p><p>Every <code>Component</code> has a few methods that you can optionally implement, which are used by the <code>FlameGame</code> class.</p><h3 id="component-lifecycle" tabindex="-1"><a class="header-anchor" href="#component-lifecycle"><span>Component lifecycle</span></a></h3><p><img src="/images/component_lifecycle.png" alt=""></p><p>The <code>onGameResize</code> method is called whenever the screen is resized, and also when this component gets added into the component tree, before the <code>onMount</code>.</p><p>The <code>onParentResize</code> method is similar: it is also called when the component is mounted into the component tree, and also whenever the parent of the current component changes its size.</p><p>The <code>onRemove</code> method can be overridden to run code before the component is removed from the game, it is only run once even if the component is removed both by using the parents remove method and the <code>Component</code> remove method.</p><p>The <code>onLoad</code> method can be overridden to run asynchronous initialization code for the component, like loading an image for example. This method is executed before <code>onGameResize</code> and <code>onMount</code>. This method is guaranteed to execute only once during the lifetime of the component, so you can think of it as an &quot;asynchronous constructor&quot;.</p><p>The <code>onMount</code> method runs every time when the component is mounted into a game tree. This means that you should not initialize <code>late final</code> variables here, since this method might run several times throughout the component&#39;s lifetime. This method will only run if the parent is already mounted. If the parent is not mounted yet, then this method will wait in a queue (this will have no effect on the rest of the game engine).</p><p>The <code>onChildrenChanged</code> method can be overridden if it&#39;s needed to detect changes in a parent&#39;s children. This method is called whenever a child is added to or removed from a parent (this includes if a child is changing its parent). Its parameters contain the targeting child and the type of change it went through (<code>added</code> or <code>removed</code>).</p><p>A component lifecycle state can be checked by a series of getters:</p><ul><li><code>isLoaded</code>: Returns a bool with the current loaded state.</li><li><code>loaded</code>: Returns a future that will complete once the component has finished loading.</li><li><code>isMounted</code>: Returns a bool with the current mounted state.</li><li><code>mounted</code>: Returns a future that will complete once the component has finished mounting.</li><li><code>isRemoved</code>: Returns a bool with the current removed state.</li><li><code>removed</code>: Returns a future that will complete once the component has been removed.</li></ul><h3 id="priority" tabindex="-1"><a class="header-anchor" href="#priority"><span>Priority</span></a></h3><p>In Flame every <code>Component</code> has the <code>int priority</code> property, which determines that component&#39;s sorting order within its parent&#39;s children. This is sometimes referred to as <code>z-index</code> in other languages and frameworks. The higher the <code>priority</code> is set to, the closer the component will appear on the screen, since it will be rendered on top of any components with lower priority that were rendered before it.</p><p>If you add two components and set one of their priorities to 1 for example, then that component will be rendered on top of the other component (if they overlap), because the default priority is 0.</p><p>All components take in <code>priority</code> as a named argument, so if you know the priority that you want your component at compile time, then you can pass it in to the constructor.</p><p>Example:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">MyGame</span> <span class="token keyword">extends</span> <span class="token class-name">FlameGame</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token metadata function">@override</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">final</span> myComponent <span class="token operator">=</span> <span class="token class-name">PositionComponent</span><span class="token punctuation">(</span>priority<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">add</span><span class="token punctuation">(</span>myComponent<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To update the priority of a component you have to set it to a new value, like <code>component.priority = 2</code>, and it will be updated in the current tick before the rendering stage.</p><p>In the following example we first initialize the component with priority 1, and then when the user taps the component we change its priority to 2:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">PositionComponent</span> <span class="token keyword">with</span> <span class="token class-name">TapCallbacks</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">  <span class="token class-name">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>priority<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token metadata function">@override</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">onTapDown</span><span class="token punctuation">(</span><span class="token class-name">TapDownEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    priority <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="composability-of-components" tabindex="-1"><a class="header-anchor" href="#composability-of-components"><span>Composability of components</span></a></h3><p>Sometimes it is useful to wrap other components inside of your component. For example by grouping visual components through a hierarchy. You can do this by adding child components to any component, for example <code>PositionComponent</code>.</p><p>When you have child components on a component every time the parent is updated and rendered, all the children are rendered and updated with the same conditions.</p><p>Example of usage, where visibility of two components are handled by a wrapper:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">GameOverPanel</span> <span class="token keyword">extends</span> <span class="token class-name">PositionComponent</span> <span class="token punctuation">{</span></span>
<span class="line">  bool visible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">final</span> <span class="token class-name">Image</span> spriteImage<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token class-name">GameOverPanel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>spriteImage<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token metadata function">@override</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">final</span> gameOverText <span class="token operator">=</span> <span class="token class-name">GameOverText</span><span class="token punctuation">(</span>spriteImage<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// GameOverText is a Component</span></span>
<span class="line">    <span class="token keyword">final</span> gameOverButton <span class="token operator">=</span> <span class="token class-name">GameOverButton</span><span class="token punctuation">(</span>spriteImage<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// GameOverRestart is a SpriteComponent</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">add</span><span class="token punctuation">(</span>gameOverText<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">add</span><span class="token punctuation">(</span>gameOverButton<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token metadata function">@override</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token class-name">Canvas</span> canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>visible<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token comment">// If not visible none of the children will be rendered</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There are two methods for adding children components to your component. First, you have methods <code>add()</code>, <code>addAll()</code>, and <code>addToParent()</code>, which can be used at any time during the game. Traditionally, children will be created and added from the component&#39;s <code>onLoad()</code> method, but it is also common to add new children during the course of the game.</p><p>The second method is to use the <code>children:</code> parameter in the component&#39;s constructor. This approach more closely resembles the standard Flutter API:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">MyGame</span> <span class="token keyword">extends</span> <span class="token class-name">FlameGame</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token metadata function">@override</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">add</span><span class="token punctuation">(</span></span>
<span class="line">      <span class="token class-name">PositionComponent</span><span class="token punctuation">(</span></span>
<span class="line">        position<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        children<span class="token punctuation">:</span> <span class="token punctuation">[</span></span>
<span class="line">          <span class="token class-name">HighScoreDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token class-name">HitPointsDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token class-name">FpsComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The two approaches can be combined freely: the children specified within the constructor will be added first, and then any additional child components after.</p><p>Note that the children added via either methods are only guaranteed to be available eventually: after they are loaded and mounted. We can only assure that they will appear in the children list in the same order as they were scheduled for addition.</p><h3 id="access-to-the-world-from-a-component" tabindex="-1"><a class="header-anchor" href="#access-to-the-world-from-a-component"><span>Access to the World from a Component</span></a></h3><p>If a component that has a <code>World</code> as an ancestor and requires access to that <code>World</code> object, one can use the <code>HasWorldReference</code> mixin.</p><p>Example:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token keyword">with</span> <span class="token class-name">HasWorldReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyWorld</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">TapCallbacks</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token metadata function">@override</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">onTapDown</span><span class="token punctuation">(</span><span class="token class-name">TapDownEvent</span> info<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// world is of type MyWorld</span></span>
<span class="line">    world<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">AnotherComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you try to access <code>world</code> from a component that doesn&#39;t have a <code>World</code> ancestor of the correct type an assertion error will be thrown.</p><h3 id="ensuring-a-component-has-a-given-parent" tabindex="-1"><a class="header-anchor" href="#ensuring-a-component-has-a-given-parent"><span>Ensuring a component has a given parent</span></a></h3><p>When a component requires to be added to a specific parent type the <code>ParentIsA</code> mixin can be used to enforce a strongly typed parent.</p><p>Example:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token keyword">with</span> <span class="token class-name">ParentIsA</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyParentComponent</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token metadata function">@override</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// parent is of type MyParentComponent</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>myValue<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you try to add <code>MyComponent</code> to a parent that is not <code>MyParentComponent</code>, an assertion error will be thrown.</p><h3 id="ensuring-a-component-has-a-given-ancestor" tabindex="-1"><a class="header-anchor" href="#ensuring-a-component-has-a-given-ancestor"><span>Ensuring a component has a given ancestor</span></a></h3><p>When a component requires to have a specific ancestor type somewhere in the component tree, <code>HasAncestor</code> mixin can be used to enforce that relationship.</p><p>The mixin exposes the <code>ancestor</code> field that will be of the given type.</p><p>Example:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token keyword">with</span> <span class="token class-name">HasAncestor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyAncestorComponent</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token metadata function">@override</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ancestor is of type MyAncestorComponent.</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span>ancestor<span class="token punctuation">.</span>myValue<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you try to add <code>MyComponent</code> to a tree that does not contain <code>MyAncestorComponent</code>, an assertion error will be thrown.</p><h3 id="component-keys" tabindex="-1"><a class="header-anchor" href="#component-keys"><span>Component Keys</span></a></h3><p>Components can have an identification key that allows them to be retrieved from the component tree, from any point of the tree.</p><p>To register a component with a key, simply pass a key to the <code>key</code> argument on the component&#39;s constructor:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">final</span> myComponent <span class="token operator">=</span> <span class="token class-name">Component</span><span class="token punctuation">(</span></span>
<span class="line">  key<span class="token punctuation">:</span> <span class="token class-name">ComponentKey</span><span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;player&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then, to retrieve it in a different point of the component tree:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line">flameGame<span class="token punctuation">.</span><span class="token function">findByKey</span><span class="token punctuation">(</span><span class="token class-name">ComponentKey</span><span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;player&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>There are two types of keys, <code>unique</code> and <code>named</code>. Unique keys are based on equality of the key instance, meaning that:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">final</span> key <span class="token operator">=</span> <span class="token class-name">ComponentKey</span><span class="token punctuation">.</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">final</span> key2 <span class="token operator">=</span> key<span class="token punctuation">;</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>key <span class="token operator">==</span> key2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token class-name">ComponentKey</span><span class="token punctuation">.</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Named ones are based on the name that it receives, so:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">final</span> key1 <span class="token operator">=</span> <span class="token class-name">ComponentKey</span><span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;player&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">final</span> key2 <span class="token operator">=</span> <span class="token class-name">ComponentKey</span><span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;player&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>key1 <span class="token operator">==</span> key2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>When named keys are used, the <code>findByKeyName</code> helper can also be used to retrieve the component.</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line">flameGame<span class="token punctuation">.</span><span class="token function">findByKeyName</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;player&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="querying-child-components" tabindex="-1"><a class="header-anchor" href="#querying-child-components"><span>Querying child components</span></a></h3><p>The children that have been added to a component live in a <code>QueryableOrderedSet</code> called <code>children</code>. To query for a specific type of components in the set, the <code>query&lt;T&gt;()</code> function can be used. By default <code>strictMode</code> is <code>false</code> in the children set, but if you set it to true, then the queries will have to be registered with <code>children.register</code> before a query can be used.</p><p>If you know in compile time that you later will run a query of a specific type it is recommended to register the query, no matter if the <code>strictMode</code> is set to <code>true</code> or <code>false</code>, since there are some performance benefits to gain from it. The <code>register</code> call is usually done in <code>onLoad</code>.</p><p>Example:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token metadata function">@override</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  children<span class="token punctuation">.</span>register<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PositionComponent</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In the example above a query is registered for <code>PositionComponent</code>s, and an example of how to query the registered component type can be seen below.</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token metadata function">@override</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>double dt<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">final</span> allPositionComponents <span class="token operator">=</span> children<span class="token punctuation">.</span>query<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PositionComponent</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="querying-components-at-a-specific-point-on-the-screen" tabindex="-1"><a class="header-anchor" href="#querying-components-at-a-specific-point-on-the-screen"><span>Querying components at a specific point on the screen</span></a></h3><p>The method <code>componentsAtPoint()</code> allows you to check which components were rendered at some point on the screen. The returned value is an iterable of components, but you can also obtain the coordinates of the initial point in each component&#39;s local coordinate space by providing a writable <code>List&lt;Vector2&gt;</code> as a second parameter.</p><p>The iterable retrieves the components in the front-to-back order, i.e. first the components in the front, followed by the components in the back.</p><p>This method can only return components that implement the method <code>containsLocalPoint()</code>. The <code>PositionComponent</code> (which is the base class for many components in Flame) provides such an implementation. However, if you&#39;re defining a custom class that derives from <code>Component</code>, you&#39;d have to implement the <code>containsLocalPoint()</code> method yourself.</p><p>Here is an example of how <code>componentsAtPoint()</code> can be used:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">void</span> <span class="token function">onDragUpdate</span><span class="token punctuation">(</span><span class="token class-name">DragUpdateInfo</span> info<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  game<span class="token punctuation">.</span><span class="token function">componentsAtPoint</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>widget<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>component <span class="token operator">is</span> <span class="token class-name">DropTarget</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      component<span class="token punctuation">.</span><span class="token function">highlight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="visibility-of-components" tabindex="-1"><a class="header-anchor" href="#visibility-of-components"><span>Visibility of components</span></a></h3><p>The recommended way to hide or show a component is usually to add or remove it from the tree using the <code>add</code> and <code>remove</code> methods.</p><p>However, adding and removing components from the tree will trigger lifecycle steps for that component (such as calling <code>onRemove</code> and <code>onMount</code>). It is also an asynchronous process and care needs to be taken to ensure the component has finished removing before it is added again if you are removing and adding a component in quick succession.</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token comment">/// Example of handling the removal and adding of a child component</span></span>
<span class="line"><span class="token comment">/// in quick succession</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token keyword">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Need to await the [removed] future first, just in case the</span></span>
<span class="line">  <span class="token comment">// component is still in the process of being removed.</span></span>
<span class="line">  <span class="token keyword">await</span> myChildComponent<span class="token punctuation">.</span>removed<span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">add</span><span class="token punctuation">(</span>myChildComponent<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token keyword">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">remove</span><span class="token punctuation">(</span>myChildComponent<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>These behaviors are not always desirable.</p><p>An alternative method to show and hide a component is to use the <code>HasVisibility</code> mixin, which may be used on any class that inherits from <code>Component</code>. This mixin introduces the <code>isVisible</code> property. Simply set <code>isVisible</code> to <code>false</code> to hide the component, and <code>true</code> to show it again, without removing it from the tree. This affects the visibility of the component and all it&#39;s descendants (children).</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token comment">/// Example that implements HasVisibility</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">PositionComponent</span> <span class="token keyword">with</span> <span class="token class-name">HasVisibility</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/// Usage of the isVisible property</span></span>
<span class="line"><span class="token keyword">final</span> myComponent <span class="token operator">=</span> <span class="token class-name">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">add</span><span class="token punctuation">(</span>myComponent<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">myComponent<span class="token punctuation">.</span>isVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The mixin only affects whether the component is rendered, and will not affect other behaviors.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">Important! Even when the component is not visible, it is still in the tree and</span>
<span class="line">will continue to receive calls to &#39;update&#39; and all other lifecycle events. It</span>
<span class="line">will still respond to input events, and will still interact with other</span>
<span class="line">components, such as collision detection for example.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The mixin works by preventing the <code>renderTree</code> method, therefore if <code>renderTree</code> is being overridden, a manual check for <code>isVisible</code> should be included to retain this functionality.</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">PositionComponent</span> <span class="token keyword">with</span> <span class="token class-name">HasVisibility</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">  <span class="token metadata function">@override</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">renderTree</span><span class="token punctuation">(</span><span class="token class-name">Canvas</span> canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Check for visibility</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>isVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// Custom code here</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment">// Continue rendering the tree</span></span>
<span class="line">      <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">renderTree</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="positioncomponent" tabindex="-1"><a class="header-anchor" href="#positioncomponent"><span>PositionComponent</span></a></h2><p>This class represents a positioned object on the screen, being a floating rectangle, a rotating sprite, or anything else with position and size. It can also represent a group of positioned components if children are added to it.</p><p>The base of the <code>PositionComponent</code> is that it has a <code>position</code>, <code>size</code>, <code>scale</code>, <code>angle</code> and <code>anchor</code> which transforms how the component is rendered.</p><h3 id="position" tabindex="-1"><a class="header-anchor" href="#position"><span>Position</span></a></h3><p>The <code>position</code> is just a <code>Vector2</code> which represents the position of the component&#39;s anchor in relation to its parent; if the parent is a <code>FlameGame</code>, it is in relation to the viewport.</p><h3 id="size" tabindex="-1"><a class="header-anchor" href="#size"><span>Size</span></a></h3><p>The <code>size</code> of the component when the zoom level of the camera is 1.0 (no zoom, default). The <code>size</code> is <em>not</em> in relation to the parent of the component.</p><h3 id="scale" tabindex="-1"><a class="header-anchor" href="#scale"><span>Scale</span></a></h3><p>The <code>scale</code> is how much the component and its children should be scaled. Since it is represented by a <code>Vector2</code>, you can scale in a uniform way by changing <code>x</code> and <code>y</code> with the same amount, or in a non-uniform way, by change <code>x</code> or <code>y</code> by different amounts.</p><h3 id="angle" tabindex="-1"><a class="header-anchor" href="#angle"><span>Angle</span></a></h3><p>The <code>angle</code> is the rotation angle around the anchor, represented as a double in radians. It is relative to the parent&#39;s angle.</p><h3 id="native-angle" tabindex="-1"><a class="header-anchor" href="#native-angle"><span>Native Angle</span></a></h3><p>The <code>nativeAngle</code> is an angle in radians, measured clockwise, representing the default orientation of the component. It can be used to define the direction in which the component is facing when <a href="#angle">angle</a> is zero.</p><p>It is specially helpful when making a sprite based component look at a specific target. If the original image of the sprite is not facing in the up/north direction, the calculated angle to make the component look at the target will need some offset to make it look correct. For such cases, <code>nativeAngle</code> can be used to let the component know what direction the original image is faces.</p><p>An example could be a bullet image pointing in east direction. In this case <code>nativeAngle</code> can be set to pi/2 radians. Following are some common directions and their corresponding native angle values.</p><table><thead><tr><th>Direction</th><th>Native Angle</th><th>In degrees</th></tr></thead><tbody><tr><td>Up/North</td><td>0</td><td>0</td></tr><tr><td>Down/South</td><td>pi or -pi</td><td>180 or -180</td></tr><tr><td>Left/West</td><td>-pi/2</td><td>-90</td></tr><tr><td>Right/East</td><td>pi/2</td><td>90</td></tr></tbody></table><h3 id="anchor" tabindex="-1"><a class="header-anchor" href="#anchor"><span>Anchor</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">:sources: ../flame/examples</span>
<span class="line">:page: anchor</span>
<span class="line">:show: widget code infobox</span>
<span class="line">This example shows effect of changing `anchor` point of parent (red) and child (blue)</span>
<span class="line">components. Tap on them to cycle through the anchor points. Note that the local</span>
<span class="line">position of the child component is (0, 0) at all times.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>anchor</code> is where on the component that the position and rotation should be defined from (the default is <code>Anchor.topLeft</code>). So if you have the anchor set as <code>Anchor.center</code> the component&#39;s position on the screen will be in the center of the component and if an <code>angle</code> is applied, it is rotated around the anchor, so in this case around the center of the component. You can think of it as the point within the component by which Flame &quot;grabs&quot; it.</p><p>When <code>position</code> or <code>absolutePosition</code> of a component is queried, the returned coordinates are that of the <code>anchor</code> of the component. In case if you want to find the position of a specific anchor point of a component which is not actually the <code>anchor</code> of that component, you can use the <code>positionOfAnchor</code> and <code>absolutePositionOfAnchor</code> method.</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">final</span> comp <span class="token operator">=</span> <span class="token class-name">PositionComponent</span><span class="token punctuation">(</span></span>
<span class="line">  size<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  anchor<span class="token punctuation">:</span> <span class="token class-name">Anchor</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Returns (0,0)</span></span>
<span class="line"><span class="token keyword">final</span> p1 <span class="token operator">=</span> component<span class="token punctuation">.</span>position<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Returns (10, 10)</span></span>
<span class="line"><span class="token keyword">final</span> p2 <span class="token operator">=</span> component<span class="token punctuation">.</span><span class="token function">positionOfAnchor</span><span class="token punctuation">(</span><span class="token class-name">Anchor</span><span class="token punctuation">.</span>bottomRight<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A common pitfall when using <code>anchor</code> is confusing it for as being the attachment point for children components. For example, setting <code>anchor</code> to <code>Anchor.center</code> for a parent component does not mean that the children components will be placed w.r.t the center of parent.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">Local origin for a child component is always the top-left corner of its parent component,</span>
<span class="line">irrespective of their `anchor` values.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="positioncomponent-children" tabindex="-1"><a class="header-anchor" href="#positioncomponent-children"><span>PositionComponent children</span></a></h3><p>All children of the <code>PositionComponent</code> will be transformed in relation to the parent, which means that the <code>position</code>, <code>angle</code> and <code>scale</code> will be relative to the parents state. So if you, for example, wanted to position a child in the center of the parent you would do this:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token metadata function">@override</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">final</span> parent <span class="token operator">=</span> <span class="token class-name">PositionComponent</span><span class="token punctuation">(</span></span>
<span class="line">    position<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    size<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">final</span> child <span class="token operator">=</span> <span class="token class-name">PositionComponent</span><span class="token punctuation">(</span></span>
<span class="line">    position<span class="token punctuation">:</span> parent<span class="token punctuation">.</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">    anchor<span class="token punctuation">:</span> <span class="token class-name">Anchor</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  parent<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Remember that most components that are rendered on the screen are <code>PositionComponent</code>s, so this pattern can be used in for example <a href="#spritecomponent"></a> and <a href="#spriteanimationcomponent"></a> too.</p><h3 id="render-positioncomponent" tabindex="-1"><a class="header-anchor" href="#render-positioncomponent"><span>Render PositionComponent</span></a></h3><p>When implementing the <code>render</code> method for a component that extends <code>PositionComponent</code> remember to render from the top left corner (0.0). Your render method should not handle where on the screen your component should be rendered. To handle where and how your component should be rendered use the <code>position</code>, <code>angle</code> and <code>anchor</code> properties and Flame will automatically handle the rest for you.</p><p>If you want to know where on the screen the bounding box of the component is you can use the <code>toRect</code> method.</p><p>In the event that you want to change the direction of your components rendering, you can also use <code>flipHorizontally()</code> and <code>flipVertically()</code> to flip anything drawn to canvas during <code>render(Canvas canvas)</code>, around the anchor point. These methods are available on all <code>PositionComponent</code> objects, and are especially useful on <code>SpriteComponent</code> and <code>SpriteAnimationComponent</code>.</p><p>In case you want to flip a component around its center without having to change the anchor to <code>Anchor.center</code>, you can use <code>flipHorizontallyAroundCenter()</code> and <code>flipVerticallyAroundCenter()</code>.</p><h2 id="spritecomponent" tabindex="-1"><a class="header-anchor" href="#spritecomponent"><span>SpriteComponent</span></a></h2><p>The most commonly used implementation of <code>PositionComponent</code> is <code>SpriteComponent</code>, and it can be created with a <code>Sprite</code>:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;package:flame/components/component.dart&#39;</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyGame</span> <span class="token keyword">extends</span> <span class="token class-name">FlameGame</span> <span class="token punctuation">{</span></span>
<span class="line">  late <span class="token keyword">final</span> <span class="token class-name">SpriteComponent</span> player<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token metadata function">@override</span></span>
<span class="line">  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">final</span> sprite <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token class-name">Sprite</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;player.png&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">final</span> size <span class="token operator">=</span> <span class="token class-name">Vector2</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">128.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">final</span> player <span class="token operator">=</span> <span class="token class-name">SpriteComponent</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> size<span class="token punctuation">,</span> sprite<span class="token punctuation">:</span> sprite<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Vector2(0.0, 0.0) by default, can also be set in the constructor</span></span>
<span class="line">    player<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 0 by default, can also be set in the constructor</span></span>
<span class="line">    player<span class="token punctuation">.</span>angle <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Adds the component</span></span>
<span class="line">    <span class="token function">add</span><span class="token punctuation">(</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="spriteanimationcomponent" tabindex="-1"><a class="header-anchor" href="#spriteanimationcomponent"><span>SpriteAnimationComponent</span></a></h2><p>This class is used to represent a Component that has sprites that run in a single cyclic animation.</p><p>This will create a simple three frame animation using 3 different images:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token metadata function">@override</span></span>
<span class="line"><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">final</span> sprites <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">Sprite</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;player_</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i</span></span><span class="token string">.png&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">final</span> animation <span class="token operator">=</span> <span class="token class-name">SpriteAnimation</span><span class="token punctuation">.</span><span class="token function">spriteList</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token keyword">await</span> <span class="token class-name">Future</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span>sprites<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    stepTime<span class="token punctuation">:</span> <span class="token number">0.01</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>player <span class="token operator">=</span> <span class="token class-name">SpriteAnimationComponent</span><span class="token punctuation">(</span></span>
<span class="line">    animation<span class="token punctuation">:</span> animation<span class="token punctuation">,</span></span>
<span class="line">    size<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">64.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you have a sprite sheet, you can use the <code>sequenced</code> constructor from the <code>SpriteAnimationData</code> class (check more details on <a class="route-link" href="/guide/flame/rendering/images.html#animation">Images &gt; Animation</a>):</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token metadata function">@override</span></span>
<span class="line"><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">final</span> size <span class="token operator">=</span> <span class="token class-name">Vector2</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">64.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">final</span> data <span class="token operator">=</span> <span class="token class-name">SpriteAnimationData</span><span class="token punctuation">.</span><span class="token function">sequenced</span><span class="token punctuation">(</span></span>
<span class="line">    textureSize<span class="token punctuation">:</span> size<span class="token punctuation">,</span></span>
<span class="line">    amount<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">    stepTime<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>player <span class="token operator">=</span> <span class="token class-name">SpriteAnimationComponent</span><span class="token punctuation">.</span><span class="token function">fromFrameData</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token keyword">await</span> images<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;player.png&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    data<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>All animation components internally maintains a <code>SpriteAnimationTicker</code> which ticks the <code>SpriteAnimation</code>. This allows multiple components to share the same animation object.</p><p>Example:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">final</span> sprites <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token comment">/*You sprite list here*/</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">final</span> animation <span class="token operator">=</span> <span class="token class-name">SpriteAnimation</span><span class="token punctuation">.</span><span class="token function">spriteList</span><span class="token punctuation">(</span>sprites<span class="token punctuation">,</span> stepTime<span class="token punctuation">:</span> <span class="token number">0.01</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">final</span> animationTicker <span class="token operator">=</span> <span class="token class-name">SpriteAnimationTicker</span><span class="token punctuation">(</span>animation<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// or alternatively, you can ask the animation object to create one for you.</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">final</span> animationTicker <span class="token operator">=</span> animation<span class="token punctuation">.</span><span class="token function">createTicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// creates a new ticker</span></span>
<span class="line"></span>
<span class="line">animationTicker<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>dt<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To listen when the animation is done (when it reaches the last frame and is not looping) you can use <code>animationTicker.completed</code>.</p><p>Example:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">await</span> animationTicker<span class="token punctuation">.</span>completed<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// or alternatively</span></span>
<span class="line"></span>
<span class="line">animationTicker<span class="token punctuation">.</span>completed<span class="token punctuation">.</span><span class="token function">whenComplete</span><span class="token punctuation">(</span>doSomething<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Additionally, <code>SpriteAnimationTicker</code> also has the following optional event callbacks: <code>onStart</code>, <code>onFrame</code>, and <code>onComplete</code>. To listen to these events, you can do the following:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">final</span> animationTicker <span class="token operator">=</span> <span class="token class-name">SpriteAnimationTicker</span><span class="token punctuation">(</span>animation<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token punctuation">.</span>onStart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Do something on start.</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">final</span> animationTicker <span class="token operator">=</span> <span class="token class-name">SpriteAnimationTicker</span><span class="token punctuation">(</span>animation<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token punctuation">.</span>onComplete <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Do something on completion.</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">final</span> animationTicker <span class="token operator">=</span> <span class="token class-name">SpriteAnimationTicker</span><span class="token punctuation">(</span>animation<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token punctuation">.</span>onFrame <span class="token operator">=</span> <span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// Do something for the second frame.</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="spriteanimationgroupcomponent" tabindex="-1"><a class="header-anchor" href="#spriteanimationgroupcomponent"><span>SpriteAnimationGroupComponent</span></a></h2><p><code>SpriteAnimationGroupComponent</code> is a simple wrapper around <code>SpriteAnimationComponent</code> which enables your component to hold several animations and change the current playing animation at runtime. Since this component is just a wrapper, the event listeners can be implemented as described in <a href="#spriteanimationcomponent"></a>.</p><p>Its use is very similar to the <code>SpriteAnimationComponent</code> but instead of being initialized with a single animation, this component receives a Map of a generic type <code>T</code> as key and a <code>SpriteAnimation</code> as value, and the current animation.</p><p>Example:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">enum</span> <span class="token class-name">RobotState</span> <span class="token punctuation">{</span></span>
<span class="line">  idle<span class="token punctuation">,</span></span>
<span class="line">  running<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">final</span> running <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadSpriteAnimation</span><span class="token punctuation">(</span><span class="token comment">/* omitted */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">final</span> idle <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadSpriteAnimation</span><span class="token punctuation">(</span><span class="token comment">/* omitted */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">final</span> robot <span class="token operator">=</span> <span class="token class-name">SpriteAnimationGroupComponent</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RobotState</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span></span>
<span class="line">  animations<span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">RobotState</span><span class="token punctuation">.</span>running<span class="token punctuation">:</span> running<span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">RobotState</span><span class="token punctuation">.</span>idle<span class="token punctuation">:</span> idle<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  current<span class="token punctuation">:</span> <span class="token class-name">RobotState</span><span class="token punctuation">.</span>idle<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Changes current animation to &quot;running&quot;</span></span>
<span class="line">robot<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token class-name">RobotState</span><span class="token punctuation">.</span>running<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As this component works with multiple <code>SpriteAnimation</code>s, naturally it needs equal number of animation tickers to make all those animation tick. Use <code>animationsTickers</code> getter to access a map containing tickers for each animation state. This can be useful if you want to register callbacks for <code>onStart</code>, <code>onComplete</code> and <code>onFrame</code>.</p><p>Example:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">enum</span> <span class="token class-name">RobotState</span> <span class="token punctuation">{</span> idle<span class="token punctuation">,</span> running<span class="token punctuation">,</span> jump <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">final</span> running <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadSpriteAnimation</span><span class="token punctuation">(</span><span class="token comment">/* omitted */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">final</span> idle <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadSpriteAnimation</span><span class="token punctuation">(</span><span class="token comment">/* omitted */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">final</span> robot <span class="token operator">=</span> <span class="token class-name">SpriteAnimationGroupComponent</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RobotState</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span></span>
<span class="line">  animations<span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">RobotState</span><span class="token punctuation">.</span>running<span class="token punctuation">:</span> running<span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">RobotState</span><span class="token punctuation">.</span>idle<span class="token punctuation">:</span> idle<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  current<span class="token punctuation">:</span> <span class="token class-name">RobotState</span><span class="token punctuation">.</span>idle<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">robot<span class="token punctuation">.</span>animationTickers<span class="token operator">?</span><span class="token punctuation">[</span><span class="token class-name">RobotState</span><span class="token punctuation">.</span>running<span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">.</span>onStart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Do something on start of running animation.</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">robot<span class="token punctuation">.</span>animationTickers<span class="token operator">?</span><span class="token punctuation">[</span><span class="token class-name">RobotState</span><span class="token punctuation">.</span>jump<span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">.</span>onStart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Do something on start of jump animation.</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">robot<span class="token punctuation">.</span>animationTickers<span class="token operator">?</span><span class="token punctuation">[</span><span class="token class-name">RobotState</span><span class="token punctuation">.</span>jump<span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">.</span>onComplete <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Do something on complete of jump animation.</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">robot<span class="token punctuation">.</span>animationTickers<span class="token operator">?</span><span class="token punctuation">[</span><span class="token class-name">RobotState</span><span class="token punctuation">.</span>idle<span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">.</span>onFrame <span class="token operator">=</span> <span class="token punctuation">(</span>currentIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Do something based on current frame index of idle animation.</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="spritegroupcomponent" tabindex="-1"><a class="header-anchor" href="#spritegroupcomponent"><span>SpriteGroupComponent</span></a></h2><p><code>SpriteGroupComponent</code> is pretty similar to its animation counterpart, but especially for sprites.</p><p>Example:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">PlayerComponent</span> <span class="token keyword">extends</span> <span class="token class-name">SpriteGroupComponent</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ButtonState</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token keyword">with</span> <span class="token class-name">HasGameReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SpriteGroupExample</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">TapCallbacks</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token metadata function">@override</span></span>
<span class="line">  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span><span class="token operator">?</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">final</span> pressedSprite <span class="token operator">=</span> <span class="token keyword">await</span> gameRef<span class="token punctuation">.</span><span class="token function">loadSprite</span><span class="token punctuation">(</span><span class="token comment">/* omitted */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">final</span> unpressedSprite <span class="token operator">=</span> <span class="token keyword">await</span> gameRef<span class="token punctuation">.</span><span class="token function">loadSprite</span><span class="token punctuation">(</span><span class="token comment">/* omitted */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    sprites <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token class-name">ButtonState</span><span class="token punctuation">.</span>pressed<span class="token punctuation">:</span> pressedSprite<span class="token punctuation">,</span></span>
<span class="line">      <span class="token class-name">ButtonState</span><span class="token punctuation">.</span>unpressed<span class="token punctuation">:</span> unpressedSprite<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    current <span class="token operator">=</span> <span class="token class-name">ButtonState</span><span class="token punctuation">.</span>unpressed<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// tap methods handler omitted...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="spawncomponent" tabindex="-1"><a class="header-anchor" href="#spawncomponent"><span>SpawnComponent</span></a></h2><p>This component is a non-visual component that spawns other components inside of the parent of the <code>SpawnComponent</code>. It&#39;s great if you for example want to spawn enemies or power-ups randomly within an area.</p><p>The <code>SpawnComponent</code> takes a factory function that it uses to create new components and an area where the components should be spawned within (or along the edges of).</p><p>For the area, you can use the <code>Circle</code>, <code>Rectangle</code> or <code>Polygon</code> class, and if you want to only spawn components along the edges of the shape set the <code>within</code> argument to false (defaults to true).</p><p>This would for example spawn new components of the type <code>MyComponent</code> every 0.5 seconds randomly within the defined circle:</p><p>The <code>factory</code> function takes an <code>int</code> as an argument, which is the index of the component that is being spawned, so if for example 4 components have been spawned already the 5th component will have the index 4, since the indexing starts at 0.</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token class-name">SpawnComponent</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token keyword">factory</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">MyComponent</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  period<span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span></span>
<span class="line">  area<span class="token punctuation">:</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you don&#39;t want the spawning rate to be static, you can use the <code>SpawnComponent.periodRange</code> constructor with the <code>minPeriod</code> and <code>maxPeriod</code> arguments instead. In the following example the component would be spawned randomly within the circle and the time between each new spawned component is between 0.5 to 10 seconds.</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token class-name">SpawnComponent</span><span class="token punctuation">.</span><span class="token function">periodRange</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token keyword">factory</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">MyComponent</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  minPeriod<span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span></span>
<span class="line">  maxPeriod<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span></span>
<span class="line">  area<span class="token punctuation">:</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you want to set the position yourself within the <code>factory</code> function, you can use set <code>selfPositioning = true</code> in the constructors and you will be able to set the positions yourself and ignore the <code>area</code> argument.</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token class-name">SpawnComponent</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token keyword">factory</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token class-name">MyComponent</span><span class="token punctuation">(</span>position<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span> size<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  selfPositioning<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  period<span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="svgcomponent" tabindex="-1"><a class="header-anchor" href="#svgcomponent"><span>SvgComponent</span></a></h2><p><strong>Note</strong>: To use SVG with Flame, use the <a href="https://github.com/flame-engine/flame_svg" target="_blank" rel="noopener noreferrer"><code>flame_svg</code></a> package.</p><p>This component uses an instance of <code>Svg</code> class to represent a Component that has a svg that is rendered in the game:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token metadata function">@override</span></span>
<span class="line"><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">final</span> svg <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token class-name">Svg</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;android.svg&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">final</span> android <span class="token operator">=</span> <span class="token class-name">SvgComponent</span><span class="token punctuation">.</span><span class="token function">fromSvg</span><span class="token punctuation">(</span></span>
<span class="line">    svg<span class="token punctuation">,</span></span>
<span class="line">    position<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    size<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="parallaxcomponent" tabindex="-1"><a class="header-anchor" href="#parallaxcomponent"><span>ParallaxComponent</span></a></h2><p>This <code>Component</code> can be used to render backgrounds with a depth feeling by drawing several transparent images on top of each other, where each image or animation (<code>ParallaxRenderer</code>) is moving with a different velocity.</p><p>The rationale is that when you look at the horizon and moving, closer objects seem to move faster than distant ones.</p><p>This component simulates this effect, making a more realistic background effect.</p><p>The simplest <code>ParallaxComponent</code> is created like this:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token metadata function">@override</span></span>
<span class="line"><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">final</span> parallaxComponent <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadParallaxComponent</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">    <span class="token class-name">ParallaxImageData</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;bg.png&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">ParallaxImageData</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;trees.png&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">add</span><span class="token punctuation">(</span>parallaxComponent<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A ParallaxComponent can also &quot;load itself&quot; by implementing the <code>onLoad</code> method:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">MyParallaxComponent</span> <span class="token keyword">extends</span> <span class="token class-name">ParallaxComponent</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyGame</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token metadata function">@override</span></span>
<span class="line">  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span></span>
<span class="line">    parallax <span class="token operator">=</span> <span class="token keyword">await</span> gameRef<span class="token punctuation">.</span><span class="token function">loadParallax</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">      <span class="token class-name">ParallaxImageData</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;bg.png&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token class-name">ParallaxImageData</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;trees.png&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyGame</span> <span class="token keyword">extends</span> <span class="token class-name">FlameGame</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token metadata function">@override</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MyParallaxComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This creates a static background. If you want a moving parallax (which is the whole point of a parallax), you can do it in a few different ways depending on how fine-grained you want to set the settings for each layer.</p><p>They simplest way is to set the named optional parameters <code>baseVelocity</code> and <code>velocityMultiplierDelta</code> in the <code>load</code> helper function. For example if you want to move your background images along the X-axis with a faster speed the &quot;closer&quot; the image is:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token metadata function">@override</span></span>
<span class="line"><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">final</span> parallaxComponent <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadParallaxComponent</span><span class="token punctuation">(</span></span>
<span class="line">    _dataList<span class="token punctuation">,</span></span>
<span class="line">    baseVelocity<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    velocityMultiplierDelta<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">1.8</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can set the baseSpeed and layerDelta at any time, for example if your character jumps or your game speeds up.</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token metadata function">@override</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">final</span> parallax <span class="token operator">=</span> parallaxComponent<span class="token punctuation">.</span>parallax<span class="token punctuation">;</span></span>
<span class="line">  parallax<span class="token punctuation">.</span>baseSpeed <span class="token operator">=</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  parallax<span class="token punctuation">.</span>velocityMultiplierDelta <span class="token operator">=</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>By default, the images are aligned to the bottom left, repeated along the X-axis and scaled proportionally so that the image covers the height of the screen. If you want to change this behavior, for example if you are not making a side-scrolling game, you can set the <code>repeat</code>, <code>alignment</code> and <code>fill</code> parameters for each <code>ParallaxRenderer</code> and add them to <code>ParallaxLayer</code>s that you then pass in to the <code>ParallaxComponent</code>&#39;s constructor.</p><p>Advanced example:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">final</span> images <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">  <span class="token function">loadParallaxImage</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token string-literal"><span class="token string">&#39;stars.jpg&#39;</span></span><span class="token punctuation">,</span></span>
<span class="line">    repeat<span class="token punctuation">:</span> <span class="token class-name">ImageRepeat</span><span class="token punctuation">.</span>repeat<span class="token punctuation">,</span></span>
<span class="line">    alignment<span class="token punctuation">:</span> <span class="token class-name">Alignment</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span></span>
<span class="line">    fill<span class="token punctuation">:</span> <span class="token class-name">LayerFill</span><span class="token punctuation">.</span>width<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">loadParallaxImage</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token string-literal"><span class="token string">&#39;planets.jpg&#39;</span></span><span class="token punctuation">,</span></span>
<span class="line">    repeat<span class="token punctuation">:</span> <span class="token class-name">ImageRepeat</span><span class="token punctuation">.</span>repeatY<span class="token punctuation">,</span></span>
<span class="line">    alignment<span class="token punctuation">:</span> <span class="token class-name">Alignment</span><span class="token punctuation">.</span>bottomLeft<span class="token punctuation">,</span></span>
<span class="line">    fill<span class="token punctuation">:</span> <span class="token class-name">LayerFill</span><span class="token punctuation">.</span>none<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">loadParallaxImage</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token string-literal"><span class="token string">&#39;dust.jpg&#39;</span></span><span class="token punctuation">,</span></span>
<span class="line">    repeat<span class="token punctuation">:</span> <span class="token class-name">ImageRepeat</span><span class="token punctuation">.</span>repeatX<span class="token punctuation">,</span></span>
<span class="line">    alignment<span class="token punctuation">:</span> <span class="token class-name">Alignment</span><span class="token punctuation">.</span>topRight<span class="token punctuation">,</span></span>
<span class="line">    fill<span class="token punctuation">:</span> <span class="token class-name">LayerFill</span><span class="token punctuation">.</span>height<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">final</span> layers <span class="token operator">=</span> images<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token punctuation">(</span>image<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">ParallaxLayer</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token keyword">await</span> image<span class="token punctuation">,</span></span>
<span class="line">    velocityMultiplier<span class="token punctuation">:</span> images<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2.0</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">final</span> parallaxComponent <span class="token operator">=</span> <span class="token class-name">ParallaxComponent</span><span class="token punctuation">.</span><span class="token function">fromParallax</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token class-name">Parallax</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token keyword">await</span> <span class="token class-name">Future</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span>layers<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    baseVelocity<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>The stars image in this example will be repeatedly drawn in both axis, align in the center and be scaled to fill the screen width.</li><li>The planets image will be repeated in Y-axis, aligned to the bottom left of the screen and not be scaled.</li><li>The dust image will be repeated in X-axis, aligned to the top right and scaled to fill the screen height.</li></ul><p>Once you are done setting up your <code>ParallaxComponent</code>, add it to the game like with any other component (<code>game.add(parallaxComponent</code>). Also, don&#39;t forget to add you images to the <code>pubspec.yaml</code> file as assets or they wont be found.</p><p>The <code>Parallax</code> file contains an extension of the game which adds <code>loadParallax</code>, <code>loadParallaxLayer</code> , <code>loadParallaxImage</code> and <code>loadParallaxAnimation</code> so that it automatically uses your game&#39;s image cache instead of the global one. The same goes for the <code>ParallaxComponent</code> file, but that provides <code>loadParallaxComponent</code>.</p><p>If you want a fullscreen <code>ParallaxComponent</code> simply omit the <code>size</code> argument and it will take the size of the game, it will also resize to fullscreen when the game changes size or orientation.</p><p>Flame provides two kinds of <code>ParallaxRenderer</code>: <code>ParallaxImage</code> and <code>ParallaxAnimation</code>, <code>ParallaxImage</code> is a static image renderer and <code>ParallaxAnimation</code> is, as it&#39;s name implies, an animation and frame based renderer. It is also possible to create custom renderers by extending the <code>ParallaxRenderer</code> class.</p><p>Three example implementations can be found in the <a href="https://github.com/flame-engine/flame/tree/main/examples/lib/stories/parallax" target="_blank" rel="noopener noreferrer">examples directory</a>.</p><h2 id="shapecomponents" tabindex="-1"><a class="header-anchor" href="#shapecomponents"><span>ShapeComponents</span></a></h2><p>A <code>ShapeComponent</code> is the base class for representing a scalable geometrical shape. The shapes have different ways of defining how they look, but they all have a size and angle that can be modified and the shape definition will scale or rotate the shape accordingly.</p><p>These shapes are meant as a tool for using geometrical shapes in a more general way than together with the collision detection system, where you want to use the <a class="route-link" href="/guide/flame/collision_detection.html#shapehitbox">ShapeHitbox</a>es.</p><h3 id="polygoncomponent" tabindex="-1"><a class="header-anchor" href="#polygoncomponent"><span>PolygonComponent</span></a></h3><p>A <code>PolygonComponent</code> is created by giving it a list of points in the constructor, called vertices. This list will be transformed into a polygon with a size, which can still be scaled and rotated.</p><p>For example, this would create a square going from (50, 50) to (100, 100), with it&#39;s center in (75, 75):</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token class-name">PolygonComponent</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">    <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A <code>PolygonComponent</code> can also be created with a list of relative vertices, which are points defined in relation to the given size, most often the size of the intended parent.</p><p>For example you could create a diamond shapes polygon like this:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token class-name">PolygonComponent</span><span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token punctuation">[</span></span>
<span class="line">      <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Middle of top wall</span></span>
<span class="line">      <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Middle of right wall</span></span>
<span class="line">      <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Middle of bottom wall</span></span>
<span class="line">      <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Middle of left wall</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    size<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The vertices in the example defines percentages of the length from the center to the edge of the screen in both x and y axis, so for our first item in our list (<code>Vector2(0.0, 1.0)</code>) we are pointing on the middle of the top wall of the bounding box, since the coordinate system here is defined from the center of the polygon.</p><p><img src="/images/polygon_shape.png" alt="An example of how to define a polygon shape"></p><p>In the image you can see how the polygon shape formed by the purple arrows is defined by the red arrows.</p><h3 id="rectanglecomponent" tabindex="-1"><a class="header-anchor" href="#rectanglecomponent"><span>RectangleComponent</span></a></h3><p>A <code>RectangleComponent</code> is created very similarly to how a <code>PositionComponent</code> is created, since it also has a bounding rectangle.</p><p>Something like this for example:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token class-name">RectangleComponent</span><span class="token punctuation">(</span></span>
<span class="line">    position<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">,</span> <span class="token number">15.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    size<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    angle<span class="token punctuation">:</span> pi<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">    anchor<span class="token punctuation">:</span> <span class="token class-name">Anchor</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Dart also already has an excellent way to create rectangles and that class is called <code>Rect</code>, you can create a Flame <code>RectangleComponent</code> from a <code>Rect</code> by using the <code>Rectangle.fromRect</code> factory, and just like when setting the vertices of the <code>PolygonComponent</code>, your rectangle will be sized according to the <code>Rect</code> if you use this constructor.</p><p>The following would create a <code>RectangleComponent</code> with its top left corner in <code>(10, 10)</code> and a size of <code>(100, 50)</code>.</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token class-name">RectangleComponent</span><span class="token punctuation">.</span><span class="token function">fromRect</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token class-name">Rect</span><span class="token punctuation">.</span><span class="token function">fromLTWH</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can also create a <code>RectangleComponent</code> by defining a relation to the intended parent&#39;s size, you can use the default constructor to build your rectangle from a position, size and angle. The <code>relation</code> is a vector defined in relation to the parent size, for example a <code>relation</code> that is <code>Vector2(0.5, 0.8)</code> would create a rectangle that is 50% of the width of the parent&#39;s size and 80% of its height.</p><p>In the example below a <code>RectangleComponent</code> of size <code>(25.0, 30.0)</code> positioned at <code>(100, 100)</code> would be created.</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token class-name">RectangleComponent</span><span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    position<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    size<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Since a square is a simplified version of a rectangle, there is also a constructor for creating a square <code>RectangleComponent</code>, the only difference is that the <code>size</code> argument is a <code>double</code> instead of a <code>Vector2</code>.</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token class-name">RectangleComponent</span><span class="token punctuation">.</span><span class="token function">square</span><span class="token punctuation">(</span></span>
<span class="line">    position<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    size<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="circlecomponent" tabindex="-1"><a class="header-anchor" href="#circlecomponent"><span>CircleComponent</span></a></h3><p>If you know how long your circle&#39;s position and/or how long the radius is going to be from the start you can use the optional arguments <code>radius</code> and <code>position</code> to set those.</p><p>The following would create a <code>CircleComponent</code> with its center in <code>(100, 100)</code> with a radius of 5, and therefore a size of <code>Vector2(10, 10)</code>.</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token class-name">CircleComponent</span><span class="token punctuation">(</span>radius<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> position<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> anchor<span class="token punctuation">:</span> <span class="token class-name">Anchor</span><span class="token punctuation">.</span>center<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>When creating a <code>CircleComponent</code> with the <code>relative</code> constructor you can define how long the radius is in comparison to the shortest edge of the of the bounding box defined by <code>size</code>.</p><p>The following example would result in a <code>CircleComponent</code> that defines a circle with a radius of 40 (a diameter of 80).</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token class-name">CircleComponent</span><span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span><span class="token number">0.8</span><span class="token punctuation">,</span> size<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="isometrictilemapcomponent" tabindex="-1"><a class="header-anchor" href="#isometrictilemapcomponent"><span>IsometricTileMapComponent</span></a></h2><p>This component allows you to render an isometric map based on a cartesian matrix of blocks and an isometric tileset.</p><p>A simple example on how to use it:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token comment">// Creates a tileset, the block ids are automatically assigned sequentially</span></span>
<span class="line"><span class="token comment">// starting at 0, from left to right and then top to bottom.</span></span>
<span class="line"><span class="token keyword">final</span> tilesetImage <span class="token operator">=</span> <span class="token keyword">await</span> images<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;tileset.png&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">final</span> tileset <span class="token operator">=</span> <span class="token class-name">SpriteSheet</span><span class="token punctuation">(</span>image<span class="token punctuation">:</span> tilesetImage<span class="token punctuation">,</span> srcSize<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// Each element is a block id, -1 means nothing</span></span>
<span class="line"><span class="token keyword">final</span> matrix <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">IsometricTileMapComponent</span><span class="token punctuation">(</span>tileset<span class="token punctuation">,</span> matrix<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It also provides methods for converting coordinates so you can handle clicks, hovers, render entities on top of tiles, add a selector, etc.</p><p>You can also specify the <code>tileHeight</code>, which is the vertical distance between the bottom and top planes of each cuboid in your tile. Basically, it&#39;s the height of the front-most edge of your cuboid; normally it&#39;s half (default) or a quarter of the tile size. On the image below you can see the height colored in the darker tone:</p><p><img src="/images/tile-height-example.png" alt="An example of how to determine the tileHeight"></p><p>This is an example of how a quarter-length map looks like:</p><p><img src="/images/isometric.png" alt="An example of a isometric map with selector"></p><p>Flame&#39;s Example app contains a more in-depth example, featuring how to parse coordinates to make a selector. The code can be found <a href="https://github.com/flame-engine/flame/blob/main/examples/lib/stories/rendering/isometric_tile_map_example.dart" target="_blank" rel="noopener noreferrer">here</a>, and a live version can be seen <a href="https://examples.flame-engine.org/#/Rendering_Isometric_Tile_Map" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 id="ninetileboxcomponent" tabindex="-1"><a class="header-anchor" href="#ninetileboxcomponent"><span>NineTileBoxComponent</span></a></h2><p>A Nine Tile Box is a rectangle drawn using a grid sprite.</p><p>The grid sprite is a 3x3 grid and with 9 blocks, representing the 4 corners, the 4 sides and the middle.</p><p>The corners are drawn at the same size, the sides are stretched on the side direction and the middle is expanded both ways.</p><p>Using this, you can get a box/rectangle that expands well to any sizes. This is useful for making panels, dialogs, borders.</p><p>Check the example app <a href="https://github.com/flame-engine/flame/blob/main/examples/lib/stories/rendering/nine_tile_box_example.dart" target="_blank" rel="noopener noreferrer">nine_tile_box</a> for details on how to use it.</p><h2 id="custompaintercomponent" tabindex="-1"><a class="header-anchor" href="#custompaintercomponent"><span>CustomPainterComponent</span></a></h2><p>A <code>CustomPainter</code> is a Flutter class used with the <code>CustomPaint</code> widget to render custom shapes inside a Flutter application.</p><p>Flame provides a component that can render a <code>CustomPainter</code> called <code>CustomPainterComponent</code>, it receives a custom painter and renders it on the game canvas.</p><p>This can be used for sharing custom rendering logic between your Flame game, and your Flutter widgets.</p><p>Check the example app <a href="https://github.com/flame-engine/flame/blob/main/examples/lib/stories/widgets/custom_painter_example.dart" target="_blank" rel="noopener noreferrer">custom_painter_component</a> for details on how to use it.</p><h2 id="componentsnotifier" tabindex="-1"><a class="header-anchor" href="#componentsnotifier"><span>ComponentsNotifier</span></a></h2><p>Most of the time just accessing children and their attributes is enough to build the logic of your game.</p><p>But sometimes, reactivity can help the developer to simplify and write better code, to help with that Flame provides the <code>ComponentsNotifier</code>, which is an implementation of a <code>ChangeNotifier</code> that notifies listeners every time a component is added, removed or manually changed.</p><p>For example, lets say that we want to show a game over text when the player&#39;s lives reach zero.</p><p>To make the component automatically report when new instances are added or removed, the <code>Notifier</code> mixin can be applied to the component class:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">Player</span> <span class="token keyword">extends</span> <span class="token class-name">SpriteComponent</span> <span class="token keyword">with</span> <span class="token class-name">Notifier</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Then to listen to changes on that component the <code>componentsNotifier</code> method from <code>FlameGame</code> can be used:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">MyGame</span> <span class="token keyword">extends</span> <span class="token class-name">FlameGame</span> <span class="token punctuation">{</span></span>
<span class="line">  int lives <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token metadata function">@override</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">final</span> playerNotifier <span class="token operator">=</span> componentsNotifier<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Player</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">final</span> player <span class="token operator">=</span> playerNotifier<span class="token punctuation">.</span>single<span class="token punctuation">;</span></span>
<span class="line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>player <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            lives<span class="token operator">--</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>lives <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">GameOverComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A <code>Notifier</code> component can also manually notify its listeners that something changed. Lets expand the example above to make a hud component to blink when the player has half of their health. In order to do so, we need that the <code>Player</code> component notify a change manually, example:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">Player</span> <span class="token keyword">extends</span> <span class="token class-name">SpriteComponent</span> <span class="token keyword">with</span> <span class="token class-name">Notifier</span> <span class="token punctuation">{</span></span>
<span class="line">  double health <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">takeHit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    health <span class="token operator">-=</span> <span class="token number">.1</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>health <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">removeFromParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>health <span class="token operator">&lt;=</span> <span class="token number">.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">notifyListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then our hud component could look like:</p><div class="language-dart line-numbers-mode" data-highlighter="prismjs" data-ext="dart" data-title="dart"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">Hud</span> <span class="token keyword">extends</span> <span class="token class-name">PositionComponent</span> <span class="token keyword">with</span> <span class="token class-name">HasGameRef</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">  <span class="token metadata function">@override</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">final</span> playerNotifier <span class="token operator">=</span> gameRef<span class="token punctuation">.</span>componentsNotifier<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Player</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">final</span> player <span class="token operator">=</span> playerNotifier<span class="token punctuation">.</span>single<span class="token punctuation">;</span></span>
<span class="line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>player <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>player<span class="token punctuation">.</span>health <span class="token operator">&lt;=</span> <span class="token number">.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">BlinkEffect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>ComponentsNotifier</code>s can also come in handy to rebuild widgets when state changes inside a <code>FlameGame</code>, to help with that Flame provides a <code>ComponentsNotifierBuilder</code> widget.</p><p>To see an example of its use check the running example <a href="https://github.com/flame-engine/flame/blob/main/examples/lib/stories/components/components_notifier_example.dart" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 id="clipcomponent" tabindex="-1"><a class="header-anchor" href="#clipcomponent"><span>ClipComponent</span></a></h2><p>A <code>ClipComponent</code> is a component that will clip the canvas to its size and shape. This means that if the component itself or any child of the <code>ClipComponent</code> renders outside of the <code>ClipComponent</code>&#39;s boundaries, the part that is not inside the area will not be shown.</p><p>A <code>ClipComponent</code> receives a builder function that should return the <code>Shape</code> that will define the clipped area, based on its size.</p><p>To make it easier to use that component, there are three factories that offers common shapes:</p><ul><li><code>ClipComponent.rectangle</code>: Clips the area in the form a rectangle based on its size.</li><li><code>ClipComponent.circle</code>: Clips the area in the form of a circle based on its size.</li><li><code>ClipComponent.polygon</code>: Clips the area in the form of a polygon based on the points received in the constructor.</li></ul><p>Check the example app <a href="https://github.com/flame-engine/flame/blob/main/examples/lib/stories/components/clip_component_example.dart" target="_blank" rel="noopener noreferrer">clip_component</a> for details on how to use it.</p><h2 id="effects" tabindex="-1"><a class="header-anchor" href="#effects"><span>Effects</span></a></h2><p>Flame provides a set of effects that can be applied to a certain type of components, these effects can be used to animate some properties of your components, like position or dimensions. You can check the list of those effects <a class="route-link" href="/guide/flame/effects.html">here</a>.</p><p>Examples of the running effects can be found <a href="https://github.com/flame-engine/flame/tree/main/examples/lib/stories/effects" target="_blank" rel="noopener noreferrer">here</a>;</p><h2 id="when-not-using-flamegame" tabindex="-1"><a class="header-anchor" href="#when-not-using-flamegame"><span>When not using <code>FlameGame</code></span></a></h2><p>If you are not using <code>FlameGame</code>, don&#39;t forget that all components needs to be updated every time your game updates. This lets component perform their internal processing and update their state.</p><p>For example, the <code>SpriteAnimationTicker</code> inside all the <code>SpriteAnimation</code> based components needs to tick the animation object to decide which animation frame will be displayed next. This can be done by manually calling <code>component.update()</code> when not using <code>FlameGame</code>. This also means, if you are implementing your own sprite animation based component, you can directly use a <code>SpriteAnimationTicker</code> to update the <code>SpriteAnimation</code>.</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/jackyanjiaqi/jackyanjiaqi.github.io/edit/main/docs/guide/flame/components.md" aria-label="编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->编辑此页<!----></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">最后更新: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: jackyanjiaqi@gmail.com">JackYanjiaqi</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/guide/flame/components.qwen.html" aria-label="千问版"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>千问版</span></div></a><!----></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-B8TszOv9.js" defer></script>
  </body>
</html>
